<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Econ 106: Data Analysis in Economics - Lecture 5: Data Visualization with ggplot2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Econ 106: Data Analysis in Economics</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lectures" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lectures</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lectures">    
        <li>
    <a class="dropdown-item" href="../lectures/lecture1.html">
 <span class="dropdown-text">Lecture 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../lectures/lecture2.html">
 <span class="dropdown-text">Lecture 2</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../labs/index.html">
 <span class="menu-text">Labs</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#section" id="toc-section" class="nav-link active" data-scroll-target="#section"></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 5: Data Visualization with ggplot2</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Econ 1 06</p>
<p>Lecture5</p>
<p>Fall 2024</p>
<p>sli des ad apt ed f rom</p>
<p>ht t ps: //</p>
<p>jh uda ta scien ce. org</p>
<p>/</p>
<p>t idyve rsecou rse</p>
<p>/ dat avi z.h tml #ab out</p>
<ul>
<li></li>
</ul>
<p>t his</p>
<ul>
<li></li>
</ul>
<p>cou rse</p>
<ul>
<li></li>
</ul>
<p>3</p>
<p>1</p>
<p>R em i nd er s</p>
<p>L ab 1 is du e S un da y 11 :5 9p m</p>
<p>P oll e ver ywhe re score s ar e in t h e ca nva sg ra de bo ok (f u ll</p>
<p>cre di t if &gt;5 0% co rre ct )</p>
<p>2</p>
<p>h tt ps:/ /</p>
<p>p o lle v.co m</p>
<p>/</p>
<p>vso ve ro</p>
<section id="section" class="level1">
<h1></h1>
<p>ti d ytue sda y</p>
<p>Fo ot b all is</p>
<p>h ap pe nin g n ow,</p>
<p>ri gh t?</p>
<p>3</p>
<p>ht tps: //</p>
<ol start="24" type="a">
<li>co m</li>
</ol>
<p>/</p>
<p>ja kek aup p</p>
<p>/s tatu s/12 265 568 134 762 700 80? s= 20</p>
<p>Ou tl i ne</p>
<p>Vi sua li zatio n Ba ckg r ou n d</p>
<p>In tro d u ctio n t o g gp lo t2</p>
<p>B asic e lem en t s( da t a, ae st he ti cs,</p>
<p>g eo ms</p>
<p>)</p>
<p>co lor a s inf o rma t ion</p>
<p>4</p>
<p>re sul ts wi th f igu re st h at ar e mo re comp el ling an d a ccessib le.</p>
<p>Two ma in a dva nt ag es o f d at a visua liza ti on :</p>
<p>F acil it at es compa rison s</p>
<p>He lps id ent if y tre nds</p>
<p>5</p>
<p>W hyg gp l ot2 ?</p>
<p>Re p ro du cib ilit y</p>
<p>Pa r t of th e</p>
<p>t idy v e rs e</p>
<p>Pr e tt y</p>
<p>b y d efa u lt</p>
<p>Cu sto mi zab le</p>
<p>ht tp:// vari anc eex plai ned .org /r/w hy</p>
<ul>
<li></li>
</ul>
<p>I</p>
<ul>
<li></li>
</ul>
<p>us e</p>
<ul>
<li></li>
</ul>
<p>gg plo t2/</p>
<p>Bu tfi r st,so m etr u tha bo ut gg pl o t2</p>
<p>7</p>
<p>ea sie stto ge tthe ha ngo f</p>
<p>S imp lev isua liza tion sa re</p>
<p>ea sie rus ing bas eR</p>
<p>Ba si cEl e me nts ofa D at aV isu al i za ti on</p>
<ol type="1">
<li></li>
</ol>
<dl>
<dt>Da ta</dt>
<dd>
<p>t he d at a you wa nt t o pl ot</p>
</dd>
</dl>
<ol start="2" type="1">
<li></li>
</ol>
<dl>
<dt>L ayo u t</dt>
<dd>
<p>ma ppi ng vari abl es on t he</p>
</dd>
</dl>
<p>pl ot</p>
<ol start="3" type="1">
<li></li>
</ol>
<dl>
<dt>Da ta di sp l ay</dt>
<dd>
<p>h ow you w ant th e</p>
</dd>
</dl>
<p>da ta t o be vi sual ized (p oin ts,</p>
<p>li nes, bars, et c.)</p>
<p>1 .Sp eci fyd at a</p>
<p>ggp lo t</p>
<p>() :</p>
<p>Cr ea te s a p lot ob je ct</p>
<p>da ta</p>
<p>sp ecif ie s wha t d at a ta bl e</p>
<p>yo u will u se</p>
<dl>
<dt>O utp ut</dt>
<dd>
<p>bla nk p lot</p>
</dd>
</dl>
<p>ggp lo t</p>
<p>(</p>
<p>da ta</p>
<p>= d iam on ds)</p>
<p>mappi ng</p>
<p>argum ent</p>
<p>specif ies</p>
<p>what shou</p>
<p>ld</p>
<p>goonthex andy</p>
<p>axes</p>
<p>x</p>
<p>= x ax isv ariable</p>
<p>y</p>
<p>= y ax isv ariable</p>
<p>aes</p>
<p>()funct ion isrequired</p>
<p>wheneveryoureference</p>
<p>specif icv ariables in yourdata</p>
<dl>
<dt>Outpu t</dt>
<dd>
<p>plot wit haxes, nodata</p>
</dd>
</dl>
<p>2 .Sp eci fyL ayo ut</p>
<p>ggplot</p>
<p>(</p>
<p>d a ta</p>
<p>= di a m o nd s ,</p>
<p>m a p p i n g</p>
<p>=</p>
<p>aes</p>
<p>(</p>
<p>x</p>
<p>= ca ra t ,</p>
<p>y</p>
<p>= pr ic e ))</p>
<p>3 .Sp eci fyD a ta Di sp l ay</p>
<p>re qu ire s:</p>
<ul>
<li></li>
</ul>
<p>o pe rato r</p>
<p>geo m_ poin t</p>
<p>()</p>
<dl>
<dt>O utp u t</dt>
<dd>
<p>sca tt erp lot</p>
</dd>
</dl>
<p>gg plo t</p>
<p>(</p>
<p>da ta</p>
<p>=di amo nds ,</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=ca rat,</p>
<p>y</p>
<p>=pr ice) )</p>
<ul>
<li></li>
</ul>
<p>ge om _po int</p>
<p>()</p>
<p>g gp lo t2 fun cti on s</p>
<p>ggp lo t</p>
<p>() : cr ea t es a</p>
<p>g gp lot</p>
<p>o bje ct</p>
<p>aes</p>
<p>( ) f u n ctio n is r e q ui re d wh e ne ve r you r e fe r e n ce</p>
<p>sp e cific va ria b le s in yo ur d a ta</p>
<p>ge om_X X X</p>
<p>() : d ra ws po int s/ lin es e t c.</p>
<ul>
<li></li>
</ul>
<p>: ad ds co mpo ne nt s t o p lot</p>
<p>Mod ula rst ruct ure</p>
<p>Sca tte r Pl ot</p>
<p>g g p l o t</p>
<p>(</p>
<p>d a ta</p>
<p>= di a m o nd s ,</p>
<p>m a p p i n g</p>
<p>=</p>
<p>aes</p>
<p>(</p>
<p>x</p>
<p>= ca ra t ,</p>
<p>y</p>
<p>= pr ic e ))</p>
<ul>
<li></li>
</ul>
<p>g e o m _ p o i n t</p>
<p>()</p>
<p>13</p>
<p>h tt ps:/ /</p>
<p>p o lle v.co m</p>
<p>/</p>
<p>vso ve ro</p>
<p>D at aE xam pl e</p>
<p>W e ar e g oin g t o wo rk wit h th e g en de r ga p d at a :</p>
<p>j obs _ge nde r</p>
<p>&lt;</p>
<ul>
<li></li>
</ul>
<p>re ad _csv</p>
<p>(</p>
<p>“h tt p s: //</p>
<p>ra w. gi th ub use rco nt e nt . com</p>
<p>/</p>
<p>rf o rd at asci en ce</p>
<p>/</p>
<p>t id yt</p>
<p>u esd ay</p>
<p>/ ma st er/ d at a /2 01 9/ 2 01 9</p>
<ul>
<li></li>
</ul>
<p>03</p>
<ul>
<li></li>
</ul>
<p>0 5/</p>
<p>jo bs_ ge nd er .csv</p>
<p>”</p>
<p>)</p>
<p>14</p>
<p>ti d ytue sda y</p>
<p>d ata</p>
<p>15</p>
<p>Exe r cise</p>
<p>Cr ea te a sca tt e r pl ot wit h</p>
<p>t ot a l_e ar nin gs</p>
<p>o n t he x</p>
<ul>
<li></li>
</ul>
<p>a xis an d</p>
<p>wa ge <em>p er cen t</em> of _ ma le</p>
<p>o n t he y</p>
<ul>
<li></li>
</ul>
<p>a xis</p>
<p>16</p>
<p>Ad j usti n gP l otS ett in gs</p>
<dl>
<dt>col or</dt>
<dd>

</dd>
</dl>
<p>co lo r of 1</p>
<ul>
<li></li>
</ul>
<p>d o bje ct s</p>
<dl>
<dt>fil l</dt>
<dd>
<p>fillc olor of 2</p>
</dd>
</dl>
<ul>
<li></li>
</ul>
<p>dobjects</p>
<dl>
<dt>li netype</dt>
<dd>
<p>how liness houldbedrawn(s olid, dashed, dotted, etc. )</p>
</dd>
<dt>shape</dt>
<dd>
<p>shape ofmarkers insc at terplots</p>
</dd>
<dt>siz e</dt>
<dd>
<p>how large objec ts appear</p>
</dd>
<dt>alp ha</dt>
<dd>
<p>transparency of object s(v aluebetw een 0 and 1)</p>
</dd>
</dl>
<p>17</p>
<p>Tr an spa re ncy</p>
<p>A dd arg um en t t o</p>
<p>ge om _po in t</p>
<p>()</p>
<p>Re du ce t ra nsp ar en cyo f</p>
<p>p oin t s</p>
<dl>
<dt>I nput</dt>
<dd>

</dd>
</dl>
<p>a lp ha</p>
<p>= 0 . 1</p>
<p>1 /1 0 o pa cit y</p>
<p>Ra ng e: 0</p>
<ul>
<li></li>
</ul>
<p>1</p>
<p>gg plo t</p>
<p>(</p>
<p>da ta</p>
<p>=di amo nds ,</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=ca rat,</p>
<p>y</p>
<p>=pri ce))</p>
<ul>
<li></li>
</ul>
<p>ge om _po int</p>
<p>(</p>
<p>al pha</p>
<p>=0. 1)</p>
<p>C ol o r</p>
<p>Ch ang e poi nt co lors t o blu e</p>
<dl>
<dt>I np u t</dt>
<dd>

</dd>
</dl>
<p>co l or</p>
<p>arg umen t</p>
<dl>
<dt>O utp u t</dt>
<dd>
<p>b lue p oin ts</p>
</dd>
</dl>
<p>C olor refe ren cec har t:</p>
<p>ht tp:// sap e.in f.us i.ch /qui ck</p>
<ul>
<li></li>
</ul>
<p>re fere nce /ggp lot2 /co lour</p>
<p>gg plo t</p>
<p>(</p>
<p>da ta</p>
<p>=di amo nds ,</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=ca rat,</p>
<p>y</p>
<p>=pr ice) )</p>
<ul>
<li></li>
</ul>
<p>ge om _po int</p>
<p>(</p>
<p>al pha</p>
<p>=0. 1,</p>
<p>co lor</p>
<p>=” blu e” )</p>
<p>h tt ps:/ /</p>
<p>p o lle v.co m</p>
<p>/</p>
<p>vso ve ro</p>
<p>Exe r cise :sca tte rp l ots an dco l or</p>
<p>20</p>
<p>Y our bos sre quir est hat alls cat terp lots us etri ang les hap esa nd the corn flow er</p>
<p>to tal_ earn ing s</p>
<p>an d</p>
<p>w age _pe rcen t_o f_m ale</p>
<p>ac cor ding ly.</p>
<p>D pl yr</p>
<p>a nd</p>
<p>g gp lo t</p>
<p>O f t en ti mes yo u wil l</p>
<p>u se</p>
<p>d plyr</p>
<p>t o cr ea te</p>
<p>a n ew d at a fr am e,</p>
<p>t he n p lot t he re sult s</p>
<p>u sing</p>
<p>g gp lot</p>
<p>Re me mbe r t o p ut in</p>
<p>t he na me o f th e</p>
<p>n ew d at a f ra me in</p>
<p>yo ur</p>
<p>g gp lot</p>
<p>()</p>
<p>21</p>
<p>ve ry_ goo d_c ut</p>
<p>&lt;</p>
<ul>
<li></li>
</ul>
<p>di am ond s</p>
<p>% &gt;%</p>
<p>fil ter</p>
<p>(</p>
<p>cu t</p>
<p>==</p>
<p>”</p>
<p>V ery Go od</p>
<p>”</p>
<p>)</p>
<p>gg plo t</p>
<p>(</p>
<p>da ta</p>
<p>=</p>
<p>ve ry_ goo d_c ut</p>
<p>,</p>
<p>mapp ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=ca rat,</p>
<p>y</p>
<p>=pr ice) )</p>
<ul>
<li></li>
</ul>
<p>ge om _po int</p>
<p>(</p>
<p>al pha</p>
<p>=0. 1,</p>
<p>co lor</p>
<p>=” blu e” )</p>
<p>D pl yr</p>
<p>a nd</p>
<p>g gp lo t</p>
<p>O f t en ti mes yo u wil l</p>
<p>u se</p>
<p>d plyr</p>
<p>t o cr ea te a</p>
<p>n ew d at a f ra me , t h en</p>
<p>p lot t he resu lt s usin g</p>
<p>g gp lot</p>
<p>t he re sult s di rect ly in t o</p>
<p>g gp lot</p>
<p>(r em ovin g t he</p>
<p>d at a a rg ume nt in side</p>
<p>g gp lot</p>
<p>() )</p>
<p>22</p>
<p>di amond s</p>
<p>% &gt;%</p>
<p>fil ter</p>
<p>(</p>
<p>cu t</p>
<p>==</p>
<p>”</p>
<p>V ery Go od</p>
<p>”</p>
<p>)</p>
<p>% &gt;%</p>
<p>gg plo t</p>
<p>(</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=ca rat,</p>
<p>y</p>
<p>=pr ice) )</p>
<ul>
<li></li>
</ul>
<p>ge om_po int</p>
<p>(</p>
<p>al pha</p>
<p>=0. 1,</p>
<p>co lor</p>
<p>=” blu e” )</p>
<p>Exe r cise</p>
<p>Fil te r f or occu pa ti on si n com pu t er, e ng ine er ing , a nd scien ce</p>
<p>cre at e a scat t e r plo t of</p>
<p>t ot a l_e ar nin gs</p>
<p>a nd</p>
<p>wa ge <em>p er cen t</em> of _ ma le</p>
<p>23</p>
<p>N ext</p>
<p>u p:L i ne Gr ap hs</p>
<p>L ine gra ph s ar e pr ob ab ly t he h ar de st g ra ph to ge ne ra te</p>
<p>co rre ct ly (no t loo k like a ho t m ess)</p>
<p>To ge t it ri gh t, mo st da ta re qu ire sw ran gl ing (ge t you r da t a</p>
<p>re ad y be f ore</p>
<p>g gp lot</p>
<p>) o r gr ou pin g ( wit hin</p>
<p>g gp lot</p>
<p>)</p>
<p>24</p>
<p>Ga pm i nd er</p>
<p>D at a</p>
<p>p art o f</p>
<p>g ap min de r</p>
<p>p acka ge</p>
<p>Fo r 18 5</p>
<p>co un tr ies</p>
<p>in th e wo rld ,</p>
<p>t he pa ckag e p rovi de sva lu es</p>
<p>f or lif e e xpe cta ncy, G DP pe r</p>
<p>ca pit a , e ver yye ar fr om 1 96 0</p>
<p>t o 2 01 6.</p>
<p>25</p>
<p>lib rar y</p>
<p>(</p>
<p>ds lab s</p>
<p>)</p>
<p>da ta</p>
<p>(</p>
<p>ga pm inde r</p>
<p>)</p>
<p>Fer ti l i tyo ver Ti me</p>
<p>gg plo t</p>
<p>(</p>
<p>da ta</p>
<p>=</p>
<p>ga pm inde r</p>
<p>,</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=</p>
<p>ye ar,</p>
<p>y</p>
<p>=fer tility ))</p>
<ul>
<li></li>
</ul>
<p>ge om _lin e</p>
<p>()</p>
<p>26</p>
<p>What hap pen ed?</p>
<p>Fer ti l i tyo ver Ti me ( scatte r pl o t)</p>
<p>gg plo t</p>
<p>(</p>
<p>da ta</p>
<p>=</p>
<p>ga pm inde r</p>
<p>,</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=</p>
<p>ye ar,</p>
<p>y</p>
<p>=fer tility ))</p>
<ul>
<li></li>
</ul>
<p>ge om _po int</p>
<p>()</p>
<p>27</p>
<p>Di spla ying t he d at a</p>
<p>as a scat t er plo t can</p>
<p>he lp us f igu re out</p>
<p>T here a re many</p>
<p>val ues of fe rti lit y fo r</p>
<p>ea ch year (on e fo r</p>
<p>ea ch coun try)</p>
<p>sen se to d raw a</p>
<p>sin gle l ine t hro ugh a ll</p>
<p>t hese p oin ts</p>
<p>Fer ti l i tyo ver Ti me ( li n ef or ea ch cou ntr y)</p>
<p>gg plo t</p>
<p>(</p>
<p>da ta</p>
<p>=</p>
<p>ga pm inde r</p>
<p>,</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=</p>
<p>ye ar,</p>
<p>y</p>
<p>=fer tility ))</p>
<ul>
<li></li>
</ul>
<p>ge om _lin e</p>
<p>(</p>
<p>ae s</p>
<p>(</p>
<p>gr oup</p>
<p>=co untr y))</p>
<p>28</p>
<p>W e nee d to t el l</p>
<p>gg plo t</p>
<p>t o creat e a li ne</p>
<p>f or each co unt ry</p>
<p>usi ng t he gro up</p>
<p>arg umen t</p>
<p>O k, bu t t oo man yco unt rie s!</p>
<p>Fer ti l i tyo ver Ti me ( li n ef or ea ch cou ntr y)</p>
<p>S outh _A me rica</p>
<p>&lt;</p>
<ul>
<li></li>
</ul>
<p>ga pm ind er</p>
<p>% &gt;%</p>
<p>fil ter(</p>
<p>re gio n==“S ou thA me ric a”</p>
<p>)</p>
<p>gg plo t</p>
<p>(</p>
<p>da ta</p>
<p>=</p>
<p>S outh _A mer ica</p>
<p>,</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=</p>
<p>ye ar,</p>
<p>y</p>
<p>=fer tility ))</p>
<ul>
<li></li>
</ul>
<p>ge om _lin e</p>
<p>(</p>
<p>ae s</p>
<p>(</p>
<p>gr oup</p>
<p>=co untr y))</p>
<p>29</p>
<p>F irst , on ly sele ct cou nt ries in So ut h America , t hen</p>
<p>gg plo t</p>
<p>h tt ps: //</p>
<p>p o lle v. co m</p>
<p>/</p>
<p>vso ve ro</p>
<p>Fer ti l i tyo ver Ti me ( li n ef or ea ch cou ntr y)</p>
<p>ga pm ind er</p>
<p>% &gt;%</p>
<p>fil ter</p>
<p>(</p>
<p>re gio n==“S ou thA me ric a”</p>
<p>)</p>
<p>% &gt;%</p>
<p>gg plo t</p>
<p>(</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=</p>
<p>ye ar,</p>
<p>y</p>
<p>=fer tility ))</p>
<ul>
<li></li>
</ul>
<p>ge om _lin e</p>
<p>(</p>
<p>ae s</p>
<p>(</p>
<p>gr oup</p>
<p>=co untr y))</p>
<p>30</p>
<p>W e can use p ipe st o wra ngl e and</p>
<p>gg plo t</p>
<p>al l at o nce</p>
<p>Exe r cise :l i ne g ra ph s</p>
<p>Cre at e a lin e grap h of o ccupa ti ons in a rchit ect ure a nd en gin eeri ng</p>
<p>occu pat io ns show ing</p>
<p>pe rcent _f ema le</p>
<p>by yea r</p>
<p>31</p>
<p>h tt ps:/ /</p>
<p>p o lle v.co m</p>
<p>/</p>
<p>vso ve ro</p>
<p>Fer ti l i tyo ver Ti me ( li n ef or ea ch con ti ne nt)</p>
<p>c o n tin e n t_ s u mma ry</p>
<p>&lt;</p>
<ul>
<li></li>
</ul>
<p>g a p min d e r</p>
<p>%&gt; %</p>
<p>g ro u p _b y</p>
<p>(</p>
<p>c o n tin e n t, y e a r</p>
<p>)</p>
<p>%&gt; %</p>
<p>s u mma ri ze</p>
<p>(</p>
<p>me a n _ fe rti li ty</p>
<p>=</p>
<p>me a n</p>
<p>(</p>
<p>fe rt il it y,</p>
<p>n a .rm</p>
<p>=T R UE )</p>
<p>32</p>
<p>W e nee d to co lla pse</p>
<p>t he da ta t o con ti nen t</p>
<p>by yea ru sing</p>
<p>g ro up _b y</p>
<p>() and</p>
<p>su mm ari ze</p>
<p>()</p>
<p>Fer ti l i tyo ver Ti me ( li n ef or ea ch con ti ne nt)</p>
<p>g g p lo t</p>
<p>(</p>
<p>d a ta</p>
<p>=</p>
<p>co n ti n en t _ sum ma ry</p>
<p>,</p>
<p>ma p p in g</p>
<p>=</p>
<p>aes</p>
<p>(</p>
<p>x</p>
<p>=</p>
<p>ye a r,</p>
<p>y</p>
<p>=</p>
<p>me a n _ fe rt il it y</p>
<p>))</p>
<ul>
<li></li>
</ul>
<p>g e o m_ li ne</p>
<p>(</p>
<p>aes</p>
<p>(</p>
<p>g ro u p</p>
<p>=co n t in e n t</p>
<p>))</p>
<p>33</p>
<p>T hen w e</p>
<p>gg plo t</p>
<p>usi ng</p>
<p>t he gro up arg umen t</p>
<p>Exe r cise</p>
<p>ca lcula t e t he me an</p>
<p>p erce nt _ f ema le</p>
<p>b yye ar an d by</p>
<p>mi no r_ca t eg or y</p>
<p>f or occu pa ti on si n com pu t er, e ng ine er ing an d</p>
<p>scie nce</p>
<p>p lot as a line gr ap h</p>
<p>34</p>
<p>C ol o r Ma pp i ng</p>
<p>35</p>
<p>ga pm ind er</p>
<p>% &gt;%</p>
<p>fil ter(</p>
<p>re gio n==“S ou thA me ric a”</p>
<p>)</p>
<p>% &gt;%</p>
<p>gg plo t</p>
<p>(</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=</p>
<p>ye ar,</p>
<p>y</p>
<p>=fer tility ))</p>
<ul>
<li></li>
</ul>
<p>ge om _lin e</p>
<p>(</p>
<p>ae s</p>
<p>(</p>
<p>gr oup</p>
<p>=co untr y</p>
<p>))</p>
<p>ga pm ind er</p>
<p>% &gt;%</p>
<p>fil ter(</p>
<p>re gio n==“S ou thA me ric a”</p>
<p>)</p>
<p>% &gt;%</p>
<p>gg plo t</p>
<p>(</p>
<p>m app ing</p>
<p>=</p>
<p>ae s</p>
<p>(</p>
<p>x</p>
<p>=</p>
<p>ye ar,</p>
<p>y</p>
<p>=fer tility ))</p>
<ul>
<li></li>
</ul>
<p>ge om _lin e</p>
<p>(</p>
<p>ae s</p>
<p>(</p>
<p>co lor</p>
<p>=co untr y</p>
<p>))</p>
<p>Exe r cise</p>
<p>ca lcula t e t he me an</p>
<p>p erce nt _ f ema le</p>
<p>b yye ar an d by</p>
<p>mi no r_ca t eg or y</p>
<p>f or occu pa ti on si n com pu t er, e ng ine er ing an d</p>
<p>scie nce</p>
<p>p lot as a line gr ap h</p>
<p>co lor t h e lin es b y</p>
<p>mi no r_ca t eg or y</p>
<p>36</p>
<p>h tt ps:/ /</p>
<p>p o lle v.co m</p>
<p>/</p>
<p>vso ve ro</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>